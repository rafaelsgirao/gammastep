# SPDX-License-Identifier: 0BSD
# Copyright (C) 2015-2020 Cameron Nemo <cnemo@tutanota.com>

#include <tunables/global>

profile dk.jonls.redshift @bindir@/redshift {
  #include <abstractions/base>
  #include <abstractions/nameservice>
  #include <abstractions/dbus-strict>
  #include <abstractions/X>

  dbus send
       bus=system
       path=/org/freedesktop/GeoClue2/Client/[0-9]*,

  dbus receive
       bus=system
       path=/org/freedesktop/GeoClue2/Manager,

  # Allow but log any other dbus activity
  audit dbus bus=system,

  owner @{HOME}/.config/{,redshift/}redshift.conf r,
  owner @{HOME}/.config/redshift/hooks/ r,
  owner @{HOME}/.config/redshift/hooks/* Ux,
  owner /{,var/}run/user/[0-9]*/redshift-shared-* rw,

  # Site-specific additions and overrides. See local/README for details.
  #include if exists <local/usr.bin.redshift>
}
